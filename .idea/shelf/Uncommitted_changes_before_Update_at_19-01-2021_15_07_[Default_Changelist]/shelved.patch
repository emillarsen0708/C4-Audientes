Index: app/src/main/java/com/example/brintaudientes/LibraryEditFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.brintaudientes;\r\n\r\nimport android.content.Context;\r\nimport android.graphics.drawable.Drawable;\r\nimport android.media.MediaPlayer;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.fragment.app.FragmentManager;\r\n\r\nimport android.os.Environment;\r\nimport android.util.Log;\r\nimport android.view.ActionMode;\r\nimport android.view.LayoutInflater;\r\nimport android.view.Menu;\r\nimport android.view.MenuInflater;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.AbsListView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.CheckBox;\r\nimport android.widget.EditText;\r\nimport android.widget.ListView;\r\nimport android.widget.Toast;\r\n\r\nimport java.lang.reflect.Field;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class LibraryEditFragment extends Fragment implements AccessFragmentViews{\r\n\r\n    private FragmentLiListener listener;\r\n\r\n    private ListView soundLibraryListView;\r\n    private ListViewAdapter adapter;\r\n    public List<String> sounds = new ArrayList<>();\r\n    public List<String> userSelection = new ArrayList<>();\r\n\r\n    public static boolean isActionMode = false;\r\n    public static ActionMode actionMode = null;\r\n\r\n    Field [] fields = R.raw.class.getFields();\r\n\r\n    public List<String> chosenSoundNames = new ArrayList<>();\r\n\r\n    public interface FragmentLiListener {\r\n        void onInputLiSent(CharSequence input);\r\n    }\r\n\r\n    ArrayList<String> arrayList;\r\n\r\n    Button cancel, displaySelected, addAsPreset, importLocalSound, buttonPress;\r\n    EditText presetName;\r\n    PresetFragment presetFragment;\r\n    private String name;\r\n    private boolean isEditReady;\r\n    CheckBox checkBox;\r\n\r\n    ArrayAdapter soundListAdapter;\r\n    MediaPlayer mediaPlayer;\r\n    private int nr = 4;\r\n    Button button;\r\n    int buttonId;\r\n\r\n    public static int selectedPosition = 0;\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n\r\n        // buttonId = MainActivity.mybundle.getInt(\"buttonId\");\r\n\r\n\r\n        View root = inflater.inflate(R.layout.fragment_edit_library, container, false);\r\n\r\n        getSounds();\r\n\r\n        soundLibraryListView = root.findViewById(R.id.listview_songs);\r\n        adapter = new ListViewAdapter(sounds, getActivity());\r\n        soundLibraryListView.setChoiceMode(AbsListView.CHOICE_MODE_MULTIPLE_MODAL);\r\n        soundLibraryListView.setAdapter(adapter);\r\n\r\n        buttonId = MainActivity.mybundle.getInt(\"buttonId\");\r\n\r\n        displaySelected = root.findViewById(R.id.display_selected_button);\r\n    /*    displaySelected.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                String itemSelected = \"Selected items:  \\n\";\r\n                for (int i = 0; i < soundLibraryListView.getCount() ; i++) {\r\n                    if(adapter.mCheckedStates.get(i)) {\r\n                        itemSelected += soundLibraryListView.getItemAtPosition(i) + \"\\n\";\r\n                    }\r\n                } Toast.makeText(getActivity(), itemSelected, Toast.LENGTH_SHORT).show();\r\n            }\r\n        });*/\r\n\r\n        soundLibraryListView.setMultiChoiceModeListener(new AbsListView.MultiChoiceModeListener() {\r\n            @Override\r\n            public void onItemCheckedStateChanged(ActionMode mode, int position, long id, boolean checked) {\r\n\r\n              /* if (userSelection.contains(sounds.get(position))) {\r\n                    userSelection.remove(sounds.get(position));\r\n                } else {\r\n                    userSelection.add(sounds.get(position));\r\n                }\r\n                Toast.makeText(getActivity(),\"Antal Item: \" +LibraryFragment.userSelection.size(),Toast.LENGTH_SHORT).show();\r\n\r\n                //mode.setTitle(userSelection.size() + \" items selected.. \");*/\r\n            }\r\n\r\n\r\n            @Override\r\n            public boolean onCreateActionMode(ActionMode mode, Menu menu) {\r\n                MenuInflater inflater = mode.getMenuInflater();\r\n                inflater.inflate(R.menu.context_menu, menu);\r\n                isActionMode = true;\r\n                actionMode = null;\r\n                return true;\r\n            }\r\n\r\n            @Override\r\n            public boolean onPrepareActionMode(ActionMode mode, Menu menu) {\r\n                return false;\r\n            }\r\n\r\n            @Override\r\n            public boolean onActionItemClicked(ActionMode mode, MenuItem item) {\r\n                switch (item.getItemId()) {\r\n                    case R.id.action_delete:\r\n                        adapter.removeItems(userSelection);\r\n                        mode.finish();\r\n                        return true;\r\n                    default:\r\n                        return false;\r\n                }\r\n            }\r\n\r\n\r\n            @Override\r\n            public void onDestroyActionMode(ActionMode mode) {\r\n                isActionMode = false;\r\n                actionMode = null;\r\n                userSelection.clear();\r\n            }\r\n        });\r\n\r\n        presetName = root.findViewById(R.id.preset_title_edittext);\r\n\r\n\r\n        importLocalSound = root.findViewById(R.id.import_local_sound);\r\n\r\n        cancel = root.findViewById(R.id.cancel_button_library);\r\n        cancel.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                ListViewAdapter.count = 0;\r\n                FragmentManager fragmentManager = getParentFragmentManager();\r\n                fragmentManager.beginTransaction()\r\n                        .remove(LibraryEditFragment.this)\r\n                        .addToBackStack(null)\r\n                        .commit();\r\n            }\r\n        });\r\n\r\n        displaySelected = root.findViewById(R.id.display_selected_button);\r\n        addAsPreset = root.findViewById(R.id.add_as_preset_button);\r\n        addAsPreset.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                CharSequence input = presetName.getText().toString();\r\n                listener.onInputLiSent(input);\r\n                MainActivity.strBundle.putString(\"editText\", presetName.getText().toString());\r\n                if (input.toString().isEmpty()) {\r\n                    Toast.makeText(getActivity(), \"Indtast et navn til dit preset\", Toast.LENGTH_LONG).show();\r\n                    userSelection = adapter.getSelectedSongs();\r\n                    Log.d(userSelection.toString(),\"Er blevet tilføjet\");\r\n                } else {\r\n                    Field[] fields = R.raw.class.getFields();\r\n                    for (int i = 0; i < fields.length; i++) {\r\n                        if (adapter.mCheckedStates.get(i)) {\r\n                            chosenSoundNames.add(fields[i].getName());\r\n                        }\r\n                    }\r\n                    System.out.println(chosenSoundNames);\r\n                    ListViewAdapter.count = 0;\r\n                    FragmentManager fragmentManager = getParentFragmentManager();\r\n                    fragmentManager.beginTransaction()\r\n                            .remove(LibraryEditFragment.this)\r\n                            .addToBackStack(null)\r\n                            .commit();\r\n                }\r\n            }\r\n        });\r\n        presetName = root.findViewById(R.id.preset_title_edittext);\r\n\r\n\r\n        soundLibraryListView.setOnItemClickListener((parent, view, position, id) -> {\r\n            // Ends the Mediaplayer if a Mediaplayer already exist\r\n            view.setSelected(true);\r\n            String pathname = String.valueOf(R.drawable.ic_selected_sound);\r\n            view.setBackground(Drawable.createFromPath(pathname));\r\n\r\n\r\n            if (mediaPlayer != null) {\r\n                mediaPlayer.release();\r\n            }\r\n\r\n            // Creates a Mediaplayer and start playing from Mediaplayer\r\n            int resId = getResources().getIdentifier(arrayList.get(position), \"raw\", getActivity().getPackageName());\r\n            mediaPlayer = MediaPlayer.create(getActivity(), resId);\r\n            mediaPlayer.start();\r\n\r\n        });\r\n\r\n        return root;\r\n    }\r\n\r\n    public void getSounds() {\r\n        for (int i = 0; i < fields.length; i++) {\r\n            sounds.add(fields[i].getName());\r\n        }\r\n    }\r\n\r\n    public void updateEditText(CharSequence newtext) {\r\n        presetName.setText(newtext);\r\n    }\r\n\r\n    @Override\r\n    public void onAttach(Context context) {\r\n        super.onAttach(context);\r\n        if (context instanceof FragmentLiListener) {\r\n            listener = (FragmentLiListener) context;\r\n        } else {\r\n            throw new RuntimeException(context.toString()\r\n                    + \" must implement FragmentLiListner\");\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onDetach() {\r\n        super.onDetach();\r\n        listener = null;\r\n    }\r\n\r\n    @Override\r\n    public void readExternalStorage() {\r\n        String fileName = \"1.mp3\";\r\n        String path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC).toString();\r\n        MediaPlayer player = new MediaPlayer();\r\n\r\n        try {\r\n            player.setDataSource(path);\r\n            player.prepare();\r\n        } catch (IllegalArgumentException e) {\r\n            e.printStackTrace();\r\n        } catch (Exception e) {\r\n            System.out.println(\"Exception of type : \" + e.toString());\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(@NonNull MenuItem item) {\r\n        int id = item.getItemId();\r\n        if (id == R.id.action_delete) {\r\n            String itemSelected = \"Selected items:  \\n\";\r\n            for (int i = 0; i < soundLibraryListView.getCount(); i++) {\r\n                if (soundLibraryListView.isItemChecked(i)) {\r\n                    itemSelected += soundLibraryListView.getItemAtPosition(i) + \"\\n\";\r\n                }\r\n\r\n            }\r\n            Toast.makeText(getActivity(), itemSelected, Toast.LENGTH_SHORT).show();\r\n            System.out.println(itemSelected);\r\n\r\n        }\r\n        return super.onOptionsItemSelected(item);\r\n    }\r\n\r\n\r\n    @Override\r\n    public void setVisibilityForButton(boolean bool) {\r\n        if (bool) {\r\n            soundLibraryListView.setSelector(R.drawable.list_item_selector);\r\n            displaySelected.setVisibility(View.GONE);\r\n            cancel.setVisibility(View.GONE);\r\n            addAsPreset.setVisibility(View.GONE);\r\n            presetName.setVisibility(View.GONE);\r\n            ViewGroup.LayoutParams list = soundLibraryListView.getLayoutParams();\r\n            list.height = 900;\r\n            soundLibraryListView.setLayoutParams(list);\r\n            soundLibraryListView.setPadding(0, 150, 0, 0);\r\n        } else {\r\n            cancel.setVisibility(View.VISIBLE);\r\n            cancel.setVisibility(View.VISIBLE);\r\n            addAsPreset.setVisibility(View.VISIBLE);\r\n            presetName.setVisibility(View.VISIBLE);\r\n        }\r\n    }\r\n\r\n    public boolean isEditReady() {\r\n        return isEditReady;\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/brintaudientes/LibraryEditFragment.java	(revision 1585f9b3da6754be695d775bd914ddddeebd46dd)
+++ app/src/main/java/com/example/brintaudientes/LibraryEditFragment.java	(date 1611055590186)
@@ -50,6 +50,7 @@
         void onInputLiSent(CharSequence input);
     }
 
+
     ArrayList<String> arrayList;
 
     Button cancel, displaySelected, addAsPreset, importLocalSound, buttonPress;
@@ -71,6 +72,8 @@
     public View onCreateView(LayoutInflater inflater, ViewGroup container,
                              Bundle savedInstanceState) {
 
+
+
         // buttonId = MainActivity.mybundle.getInt("buttonId");
 
 
@@ -176,8 +179,6 @@
                 MainActivity.strBundle.putString("editText", presetName.getText().toString());
                 if (input.toString().isEmpty()) {
                     Toast.makeText(getActivity(), "Indtast et navn til dit preset", Toast.LENGTH_LONG).show();
-                    userSelection = adapter.getSelectedSongs();
-                    Log.d(userSelection.toString(),"Er blevet tilføjet");
                 } else {
                     Field[] fields = R.raw.class.getFields();
                     for (int i = 0; i < fields.length; i++) {
Index: app/src/main/java/com/example/brintaudientes/PresetFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.brintaudientes;\r\n\r\nimport android.media.MediaPlayer;\r\nimport android.media.SoundPool;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport android.view.LayoutInflater;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.RadioButton;\r\nimport android.widget.RadioGroup;\r\nimport android.widget.TextView;\r\n\r\nimport static android.view.View.GONE;\r\n\r\npublic class PresetFragment extends Fragment implements View.OnTouchListener {\r\n\r\n    Button play, edit;\r\n    RadioButton add1, add2, add3, add4, add5, add6, add7, add8, add9;\r\n\r\n    private boolean play_pause_button = true;\r\n\r\n    private final boolean waitForEdit = true;\r\n    LibraryEditFragment addSound = new LibraryEditFragment();\r\n    LibraryEditFragment addSound2 = new LibraryEditFragment();\r\n    LibraryEditFragment addSound3 = new LibraryEditFragment();\r\n    LibraryEditFragment addSound4 = new LibraryEditFragment();\r\n    LibraryEditFragment addSound5 = new LibraryEditFragment();\r\n    LibraryEditFragment addSound6 = new LibraryEditFragment();\r\n    LibraryEditFragment addSound7 = new LibraryEditFragment();\r\n    LibraryEditFragment addSound8 = new LibraryEditFragment();\r\n    LibraryEditFragment addSound9 = new LibraryEditFragment();\r\n\r\n    RadioGroup radioGroup;\r\n\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        View root = inflater.inflate(R.layout.fragment_preset, container, false);\r\n\r\n        radioGroup = root.findViewById(R.id.radio_group);\r\n\r\n        play = root.findViewById(R.id.play_button);\r\n        play.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                if ((play != null) && (play_pause_button)) {\r\n                    play.setBackgroundResource(R.drawable.ic_pause_icon);\r\n                    play_pause_button = false;\r\n                    if (add1.isChecked()) {\r\n                        for (int i = 0; i < addSound.chosenSoundNames.size(); i++) {\r\n                            MediaPlayer mediaPlayer = new MediaPlayer();\r\n                            mediaPlayer = MediaPlayer.create(getContext(), getResources().getIdentifier(addSound.chosenSoundNames.get(i), \"raw\", getActivity().getPackageName()));\r\n                            mediaPlayer.start();\r\n                        }\r\n                    }\r\n\r\n                } else {\r\n                    if (play != null) play.setBackgroundResource(R.drawable.ic_play_icon);\r\n                    play_pause_button = true;\r\n                }\r\n            }\r\n        });\r\n        edit = root.findViewById(R.id.edit_preset_button);\r\n        edit.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n                if (add1.isChecked()) {\r\n                    getActivity().getSupportFragmentManager().beginTransaction()\r\n                            .add(((ViewGroup) getView().getParent()).getId(), getLibraryFragment(addSound), \"add1\")\r\n                            .addToBackStack(null)\r\n                            .commit();\r\n                    if (!addSound.chosenSoundNames.isEmpty()) {\r\n                        addSound.chosenSoundNames.removeAll(addSound.chosenSoundNames);\r\n                    }\r\n                } else if (add2.isChecked()) {\r\n                    getActivity().getSupportFragmentManager().beginTransaction()\r\n                            .add(((ViewGroup) getView().getParent()).getId(), getLibraryFragment(addSound2), \"add2\")\r\n                            .addToBackStack(null)\r\n                            .commit();\r\n                    if (!addSound2.chosenSoundNames.isEmpty()) {\r\n                        addSound2.chosenSoundNames.removeAll(addSound2.chosenSoundNames);\r\n                    }\r\n                } else if (add3.isChecked()) {\r\n                    getActivity().getSupportFragmentManager().beginTransaction()\r\n                            .add(((ViewGroup) getView().getParent()).getId(), getLibraryFragment(addSound3), \"add3\")\r\n                            .addToBackStack(null)\r\n                            .commit();\r\n                    if (!addSound2.chosenSoundNames.isEmpty()) {\r\n                        addSound2.chosenSoundNames.removeAll(addSound2.chosenSoundNames);\r\n                    }\r\n                } else if (add4.isChecked()) {\r\n                    getActivity().getSupportFragmentManager().beginTransaction()\r\n                            .add(((ViewGroup) getView().getParent()).getId(), getLibraryFragment(addSound4), \"add4\")\r\n                            .addToBackStack(null)\r\n                            .commit();\r\n                    if (!addSound2.chosenSoundNames.isEmpty()) {\r\n                        addSound2.chosenSoundNames.removeAll(addSound2.chosenSoundNames);\r\n                    }\r\n                } else if (add5.isChecked()) {\r\n                    getActivity().getSupportFragmentManager().beginTransaction()\r\n                            .add(((ViewGroup) getView().getParent()).getId(), getLibraryFragment(addSound5), \"add5\")\r\n                            .addToBackStack(null)\r\n                            .commit();\r\n                    if (!addSound5.chosenSoundNames.isEmpty()) {\r\n                        addSound5.chosenSoundNames.removeAll(addSound5.chosenSoundNames);\r\n                    }\r\n                } else if (add6.isChecked()) {\r\n                    getActivity().getSupportFragmentManager().beginTransaction()\r\n                            .add(((ViewGroup) getView().getParent()).getId(), getLibraryFragment(addSound6), \"add6\")\r\n                            .addToBackStack(null)\r\n                            .commit();\r\n                    if (!addSound6.chosenSoundNames.isEmpty()) {\r\n                        addSound6.chosenSoundNames.removeAll(addSound6.chosenSoundNames);\r\n                    }\r\n\r\n                } else if (add7.isChecked()) {\r\n                    getActivity().getSupportFragmentManager().beginTransaction()\r\n                            .add(((ViewGroup) getView().getParent()).getId(), getLibraryFragment(addSound7), \"add7\")\r\n                            .addToBackStack(null)\r\n                            .commit();\r\n                    if (!addSound7.chosenSoundNames.isEmpty()) {\r\n                        addSound7.chosenSoundNames.removeAll(addSound7.chosenSoundNames);\r\n                    }\r\n                } else if (add8.isChecked()) {\r\n                    getActivity().getSupportFragmentManager().beginTransaction()\r\n                            .add(((ViewGroup) getView().getParent()).getId(), getLibraryFragment(addSound8), \"add8\")\r\n                            .addToBackStack(null)\r\n                            .commit();\r\n                    if (!addSound8.chosenSoundNames.isEmpty()) {\r\n                        addSound8.chosenSoundNames.removeAll(addSound8.chosenSoundNames);\r\n                    }\r\n                } else if (add9.isChecked()) {\r\n                    getActivity().getSupportFragmentManager().beginTransaction()\r\n                            .add(((ViewGroup) getView().getParent()).getId(), getLibraryFragment(addSound9), \"add9\")\r\n                            .addToBackStack(null)\r\n                            .commit();\r\n                    if (!addSound9.chosenSoundNames.isEmpty()) {\r\n                        addSound9.chosenSoundNames.removeAll(addSound9.chosenSoundNames);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        add1 = root.findViewById(R.id.select_preset_button_1);\r\n        add1.setOnTouchListener(this);\r\n\r\n        add2 = root.findViewById(R.id.select_preset_button_2);\r\n        add2.setOnTouchListener(this);\r\n\r\n        add3 = root.findViewById(R.id.select_preset_button_3);\r\n        add3.setOnTouchListener(this);\r\n\r\n        add4 = root.findViewById(R.id.select_preset_button_4);\r\n        add4.setOnTouchListener(this);\r\n\r\n        add5 = root.findViewById(R.id.select_preset_button_5);\r\n        add5.setOnTouchListener(this);\r\n\r\n        add6 = root.findViewById(R.id.select_preset_button_6);\r\n        add6.setOnTouchListener(this);\r\n\r\n        add7 = root.findViewById(R.id.select_preset_button_7);\r\n        add7.setVisibility(GONE);\r\n\r\n        add8 = root.findViewById(R.id.select_preset_button_8);\r\n        add8.setVisibility(GONE);\r\n\r\n        add9 = root.findViewById(R.id.select_preset_button_9);\r\n        add9.setVisibility(GONE);\r\n\r\n        return root;\r\n    }\r\n\r\n\r\n\r\n    public LibraryEditFragment getLibraryFragment(LibraryEditFragment libraryEditFragment) {\r\n        if (libraryEditFragment == null) {\r\n            return new LibraryEditFragment();\r\n        } else {\r\n            return libraryEditFragment;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public boolean onTouch(View v, MotionEvent event) {\r\n        switch (v.getId()) {\r\n            case R.id.select_preset_button_1:\r\n            case R.id.select_preset_button_2:\r\n            case R.id.select_preset_button_3:\r\n            case R.id.select_preset_button_4:\r\n            case R.id.select_preset_button_5:\r\n            case R.id.select_preset_button_6:\r\n            case R.id.select_preset_button_7:\r\n            case R.id.select_preset_button_8:\r\n            case R.id.select_preset_button_9:\r\n                break;\r\n            default:\r\n                throw new RuntimeException(\"Unknown button ID\");\r\n\r\n        }\r\n        MainActivity.mybundle.putInt(\"buttonId\", v.getId());\r\n        return false;\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/brintaudientes/PresetFragment.java	(revision 1585f9b3da6754be695d775bd914ddddeebd46dd)
+++ app/src/main/java/com/example/brintaudientes/PresetFragment.java	(date 1611052358218)
@@ -60,7 +60,9 @@
                             MediaPlayer mediaPlayer = new MediaPlayer();
                             mediaPlayer = MediaPlayer.create(getContext(), getResources().getIdentifier(addSound.chosenSoundNames.get(i), "raw", getActivity().getPackageName()));
                             mediaPlayer.start();
+
                         }
+                        System.out.println(addSound.chosenSoundNames.size());
                     }
 
                 } else {
Index: app/src/main/java/com/example/brintaudientes/ListViewAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.brintaudientes;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Context;\r\nimport android.content.SharedPreferences;\r\nimport android.preference.PreferenceManager;\r\nimport android.util.Log;\r\nimport android.util.SparseBooleanArray;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.CheckBox;\r\nimport android.widget.CompoundButton;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class ListViewAdapter extends ArrayAdapter<String> {\r\n\r\n    private List<String> sounds = new ArrayList<>();\r\n    private Context context;\r\n    static int count = 0;\r\n    CheckBox checkBox;\r\n\r\n    SparseBooleanArray mCheckedStates = new SparseBooleanArray(sounds.size());\r\n\r\n\r\n   // SparseBooleanArray mCheckedStates = new SparseBooleanArray(sounds.size());\r\n\r\n    public ListViewAdapter(List<String> sounds, Context context) {\r\n        super(context, R.layout.item_layout, sounds);\r\n        this.context = context;\r\n        this.sounds = sounds;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public View getView(int position, @Nullable View convertView, @NonNull ViewGroup parent) {\r\n\r\n        LayoutInflater inflater = ((Activity) context).getLayoutInflater();\r\n        View row = inflater.inflate(R.layout.item_layout, parent, false);\r\n        TextView soundNames = row.findViewById(R.id.song_name);\r\n        soundNames.setText(sounds.get(position));\r\n\r\n        checkBox = row.findViewById(R.id.checkbox);\r\n        checkBox.setTag(position);\r\n        checkBox.setVisibility(View.VISIBLE);\r\n        checkBox.setChecked(mCheckedStates.get(position));\r\n\r\n        /*checkBox.setChecked(Update(sounds.get(position)));\r\n        UpdateCountValue(\"key\");*/\r\n\r\n\r\n        checkBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            @Override\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                int position = (int) buttonView.getTag();\r\n\r\n                if (isChecked) {\r\n                    count++;\r\n                    mCheckedStates.put(position, true);\r\n                   /* SaveIntoSharepreference(sounds.get(position), isChecked);\r\n                    SaveCount(\"key\",count);\r\n                    Log.d(sounds.get(position), \"Checked\");*/\r\n                } else if (!isChecked) {\r\n                    count--;\r\n                    mCheckedStates.put(position, false);\r\n                    /*SaveIntoSharepreference(sounds.get(position), isChecked);\r\n                    SaveCount(\"key\",count);\r\n                    Log.d(sounds.get(position), \"Unchecked\");*/\r\n                }\r\n                 if (count >= 5) {\r\n                     mCheckedStates.put(position, false);\r\n                    Toast.makeText(context, \"Du kan ikke vælge flere end \" + (count - 1) + \" sange\", Toast.LENGTH_LONG).show();\r\n                    /* SaveCount(\"key\",count);*/\r\n                    buttonView.setChecked(false);\r\n                    count--;\r\n                } else {\r\n                    sounds.get(position);\r\n                }\r\n               /* if (LibraryFragment.userSelection.contains(sounds.get(getPosition))){\r\n                        LibraryFragment.userSelection.remove(sounds.get(getPosition));\r\n                    } else{\r\n                        LibraryFragment.userSelection.add(sounds.get(getPosition));\r\n                    }\r\n                    Toast.makeText(context,\"Antal Item: \" +LibraryFragment.userSelection.size(),Toast.LENGTH_SHORT).show();*//*\r\n                }*/\r\n            }\r\n        });\r\n\r\n        return row;\r\n    }\r\n\r\n    public void removeItems(List<String> items) {\r\n        for (String item : items) {\r\n            sounds.remove(item);\r\n        }\r\n        notifyDataSetChanged();\r\n    }\r\n\r\n    private void SaveIntoSharepreference(String key, boolean value) {\r\n        SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(context);\r\n        SharedPreferences.Editor editor = sharedPreferences.edit();\r\n        editor.putBoolean(key, value);\r\n        editor.apply();\r\n    }\r\n\r\n    private boolean Update(String key) {\r\n        SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this.context);\r\n        boolean checkBoxValue = sharedPreferences.getBoolean(key, checkBox.isChecked());\r\n        return checkBoxValue;\r\n    }\r\n    private void SaveCount(String key, int countValue) {\r\n        SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this.context);\r\n        SharedPreferences.Editor editor = sharedPreferences.edit();\r\n        editor.putInt(\"key\", countValue);\r\n        editor.apply();\r\n    }\r\n    private int UpdateCountValue(String key) {\r\n        SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this.context);\r\n        int countValue = sharedPreferences.getInt(\"key\", count);\r\n        return countValue;\r\n    }\r\n}\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/brintaudientes/ListViewAdapter.java	(revision 1585f9b3da6754be695d775bd914ddddeebd46dd)
+++ app/src/main/java/com/example/brintaudientes/ListViewAdapter.java	(date 1611004565950)
@@ -30,9 +30,6 @@
 
     SparseBooleanArray mCheckedStates = new SparseBooleanArray(sounds.size());
 
-
-   // SparseBooleanArray mCheckedStates = new SparseBooleanArray(sounds.size());
-
     public ListViewAdapter(List<String> sounds, Context context) {
         super(context, R.layout.item_layout, sounds);
         this.context = context;
Index: app/src/main/java/com/example/brintaudientes/MainActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.brintaudientes;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n//import androidx.databinding.DataBindingUtil;\r\nimport androidx.fragment.app.Fragment;\r\n\r\n\r\nimport android.app.FragmentManager;\r\nimport android.media.AudioManager;\r\nimport android.media.MediaPlayer;\r\nimport android.os.Bundle;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\n\r\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\r\n\r\n// todo: Få styr på skærmvending så player ikke kører videre mens player står i pause mode\r\n\r\npublic class MainActivity extends AppCompatActivity implements FragmentManager.OnBackStackChangedListener, AccessFragmentViews, LibraryEditFragment.FragmentLiListener {\r\n\r\n   // ORDRE AF PRESETS\r\n\r\n    /*PresetBuilding MakeConcurrents = new ConcurrentPresetBuilding();\r\n    Preset oneSound = MakeConcurrents.orderThePreset(\"ONE\");\r\n    Preset twoSound = MakeConcurrents.orderThePreset(\"TWO\");\r\n    Preset threeSound = MakeConcurrents.orderThePreset(\"THREE\");\r\n    Preset fourSound = MakeConcurrents.orderThePreset(\"FOUR\");\r\n\r\n\r\n    PresetBuilding MakeContinuous = new ContinuousPresetBuilding();\r\n    Preset oneSound = MakeContinuous.orderThePreset(\"ONE\");\r\n    Preset twoSound = MakeContinuous.orderThePreset(\"TWO\");\r\n    Preset threeSound = MakeContinuous.orderThePreset(\"THREE\");\r\n    Preset fourSound = MakeContinuous.orderThePreset(\"FOUR\");*/\r\n\r\n\r\n    //PlayFragment playFragment = new PlayFragment();\r\n    final PresetFragment presetFragment = new PresetFragment();\r\n    final VolumeFragment volumeFragment = new VolumeFragment();\r\n    final LibraryFragment libraryFragment = new LibraryFragment();\r\n    Fragment selectedFragment = presetFragment;\r\n    Button libraryCancel;\r\n    //String buttonText1, buttonText2, buttonText3, buttonText4, buttonText5, buttonText6, buttonText7, buttonText8 = \"Add new\";\r\n    int buttonId;\r\n    private String presetName;\r\n    public static Bundle mybundle = new Bundle();\r\n    public static Bundle strBundle = new Bundle();\r\n\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        BottomNavigationView buttNav = findViewById(R.id.bottom);\r\n        buttNav.setOnNavigationItemSelectedListener(naviListner);\r\n\r\n        getSupportFragmentManager().beginTransaction().add(R.id.fragment_container, libraryFragment, \"3\").hide(libraryFragment).commit();\r\n        getSupportFragmentManager().beginTransaction().add(R.id.fragment_container, volumeFragment, \"2\").hide(volumeFragment).commit();\r\n        getSupportFragmentManager().beginTransaction().add(R.id.fragment_container, presetFragment, \"1\").commit();\r\n        libraryCancel = findViewById(R.id.cancel_button_library);\r\n    }\r\n\r\n    private BottomNavigationView.OnNavigationItemSelectedListener naviListner =\r\n            new BottomNavigationView.OnNavigationItemSelectedListener() {\r\n                @Override\r\n                public boolean onNavigationItemSelected(@NonNull MenuItem item) {\r\n                    switch (item.getItemId()) {\r\n                        case R.id.nav_play:\r\n                            getSupportFragmentManager().beginTransaction()\r\n                                    .hide(selectedFragment)\r\n                                    .show(presetFragment)\r\n                                    .commit();\r\n                            selectedFragment = presetFragment;\r\n                            return true;\r\n                        case R.id.nav_vol:\r\n                            getSupportFragmentManager().beginTransaction()\r\n                                    .hide(selectedFragment)\r\n                                    .show(volumeFragment)\r\n                                    .commit();\r\n                            selectedFragment = volumeFragment;\r\n                            return true;\r\n                        case R.id.nav_preset:\r\n                            getSupportFragmentManager().beginTransaction()\r\n                                    .hide(selectedFragment)\r\n                                    .show(libraryFragment)\r\n                                    .commit();\r\n                            selectedFragment = libraryFragment;\r\n                            return true;\r\n                    }\r\n                    return false;\r\n                }\r\n            };\r\n\r\n    public void setButtonTextString(String buttonText) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onBackStackChanged() {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void setVisibilityForButton(boolean bool) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void readExternalStorage() {\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onInputLiSent(CharSequence input) {\r\n        buttonId = MainActivity.mybundle.getInt(\"buttonId\");\r\n        if (!input.toString().isEmpty()) {\r\n            switch (buttonId) {\r\n                case R.id.select_preset_button_1:\r\n                    presetFragment.add1.setText(input);\r\n                    break;\r\n                case R.id.select_preset_button_2:\r\n                    presetFragment.add2.setText(input);\r\n                    break;\r\n                case R.id.select_preset_button_3:\r\n                    presetFragment.add3.setText(input);\r\n                    break;\r\n                case R.id.select_preset_button_4:\r\n                    presetFragment.add4.setText(input);\r\n                    break;\r\n                case R.id.select_preset_button_5:\r\n                    presetFragment.add5.setText(input);\r\n                    break;\r\n                case R.id.select_preset_button_6:\r\n                    presetFragment.add6.setText(input);\r\n                    break;\r\n                case R.id.select_preset_button_7:\r\n                    presetFragment.add7.setText(input);\r\n                    break;\r\n                case R.id.select_preset_button_8:\r\n                    presetFragment.add8.setText(input);\r\n                    break;\r\n                case R.id.select_preset_button_9:\r\n                    presetFragment.add9.setText(input);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/brintaudientes/MainActivity.java	(revision 1585f9b3da6754be695d775bd914ddddeebd46dd)
+++ app/src/main/java/com/example/brintaudientes/MainActivity.java	(date 1611055651887)
@@ -35,9 +35,8 @@
     Preset twoSound = MakeContinuous.orderThePreset("TWO");
     Preset threeSound = MakeContinuous.orderThePreset("THREE");
     Preset fourSound = MakeContinuous.orderThePreset("FOUR");*/
-
-
     //PlayFragment playFragment = new PlayFragment();
+    LibraryEditFragment libraryEditFragment = new LibraryEditFragment();
     final PresetFragment presetFragment = new PresetFragment();
     final VolumeFragment volumeFragment = new VolumeFragment();
     final LibraryFragment libraryFragment = new LibraryFragment();
@@ -51,6 +50,8 @@
 
 
 
+
+
     @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
diff --git .idea/shelf/Uncommitted_changes_before_Checkout_at_12_01_2021__17_08__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Checkout_at_12_01_2021__17_08__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Checkout_at_12_01_2021__17_39__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Checkout_at_12_01_2021__17_39__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Checkout_at_12_01_2021__16_49__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Checkout_at_12_01_2021__16_49__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_06_01_2021__23_32__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_06_01_2021__23_32__Default_Changelist_.xml
